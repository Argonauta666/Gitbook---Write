# FTP

File Transfer Protocol or FTP for short, is a communication protocol used to transfer files from a server to a client remotely. This service commonly runs on port 21 of a machine. To use this, one would need to set up some kind of FTP server for people to connect to using the `ftp` command.

## Banner Grabbing

Find the version of FTP running on the machine:

```bash
nc -vn 10.10.10.10 21
# FTP server could be vulnerable to exploits
```

## Downloading Files

```bash
wget -m --no-passive ftp://anonymous:anonymous@10.10.10.10
```

## Weak Credentials

FTP servers can be misconfigured to have default passwords or allowing for anonymous logins. Anonymous logins are one where the user is able to login with `anonymous:anoymous` credentials and access the file system.

&#x20;Always attempt some password brute brute forcing and anonymous logins. Hydra can be used here.

{% embed url="https://github.com/danielmiessler/SecLists/blob/master/Passwords/Default-Credentials/ftp-betterdefaultpasslist.txt" %}

```bash
hydra -L userlist.txt -P passlist.txt 192.168.0.100 ftp
```

## Getting Access

Most of the time, when we access FTP, we have access to some directory within the machine, and we can start to enumerate the directory we have access to.

Things to look out for:

* Do the files contain sensitive information?
* Are there any exploits that I can find for the FTP server? (RCE, Directory Traveral?)
* Any other useful information?

#### Checking for Exploits:

```bash
searchsploit <ftp keyword>
searchsploit -m <exploit name>
```

## FTP Bounce

FTP Bounce is a type of attack that makes the FTP server a proxy for our scans to go through. We can use this to see what non-public facing services are alive on the back-end, as well as hide our tracks due to using the FTP server as a front.

{% code overflow="wrap" %}
```bash
nmap -b <name>:<pass>@<ftp_server> <victim>
nmap -Pn -v -p 21,80 -b ftp:ftp@10.2.1.5 127.0.0.1 #Scan ports 21,80 of the FTP
nmap -v -p 21,22,445,80,443 -b ftp:ftp@10.2.1.5 192.168.0.1/24 #Scan the internal network (of the FTP) ports 21,22,445,80,443

# Taken from HackTricks
```
{% endcode %}

{% embed url="https://book.hacktricks.xyz/network-services-pentesting/pentesting-ftp/ftp-bounce-attack" %}
